(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{30519:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var a=n(95155),r=n(12115),c=n(41574),i=n(80317),l=n(56120),d=n(80223),s=n(54463),o=n(31512),m=n(6388),x=n(42206),h=n(77284),u=n(7291),p=n(64647),g=n(98638),j=n(53961),A=n(20063);let k=()=>{let[e,t]=(0,r.useState)([]),[n,k]=(0,r.useState)(null),[b,f]=(0,r.useState)(null),[y,I]=(0,r.useState)(null),v=(0,A.useRouter)();(0,r.useEffect)(()=>{(async()=>{if((0,j.C)())try{let e=await fetch("/api/update-navbar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"read"})});if(e.ok){let n=await e.json();t(n.menuLinks)}else{let t=await e.json();f(t.message)}}catch(e){console.error("Error fetching menu links:",e),f("Failed to fetch menu links.")}})()},[]);let R=async(e,n,a)=>{if((0,j.C)()){I(a);try{let a=await fetch("/api/update-navbar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,...n})});if(a.ok){let e=await a.json();k(e.message),f(null),e.updatedMenuLinks&&t(e.updatedMenuLinks),console.log("REFRESHING"),v.refresh()}else{let e=await a.json();f(e.message),k(null)}}catch(e){console.error("Error handling action:",e),f("An error occurred while processing the action."),k(null)}finally{I(null)}}};return(0,a.jsxs)(c.default,{sx:{padding:"1rem"},children:[(0,a.jsx)("h3",{children:"Update Navbar Items"}),n&&(0,a.jsx)(i.A,{variant:"body1",color:"success.main",gutterBottom:!0,children:n}),b&&(0,a.jsx)(i.A,{variant:"body1",color:"error",gutterBottom:!0,children:b}),(0,a.jsxs)(l.A,{children:[(0,a.jsx)(d.A,{children:(0,a.jsxs)(s.A,{children:[(0,a.jsx)(o.A,{children:"Name"}),(0,a.jsx)(o.A,{children:"Link"}),(0,a.jsx)(o.A,{children:"Protected"}),(0,a.jsx)(o.A,{children:"Actions"})]})}),(0,a.jsx)(m.A,{children:e.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)(s.A,{children:[(0,a.jsx)(o.A,{children:e.name}),(0,a.jsx)(o.A,{children:e.link}),(0,a.jsx)(o.A,{children:(0,a.jsx)(x.A,{checked:e.protected,disabled:!0})}),(0,a.jsxs)(o.A,{children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let n=new FormData(e.currentTarget);R("edit",{parentIndex:t,name:n.get("name"),link:n.get("link"),protected:"on"===n.get("protected")},"update-".concat(t))},children:[(0,a.jsx)(h.A,{name:"name",defaultValue:e.name,size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(h.A,{name:"link",defaultValue:e.link,size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(u.A,{control:(0,a.jsx)(x.A,{name:"protected",defaultChecked:e.protected}),label:"Protected"}),(0,a.jsx)(p.A,{type:"submit",variant:"outlined",color:"primary",disabled:y==="update-".concat(t),startIcon:y==="update-".concat(t)&&(0,a.jsx)(g.A,{size:20}),sx:{marginRight:"0.5rem"},children:y==="update-".concat(t)?"Updating...":"Update"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let n=new FormData(e.currentTarget);R("add",{parentIndex:t,name:n.get("name"),link:n.get("link"),protected:"on"===n.get("protected")},"add-next-".concat(t)),e.currentTarget.reset()},children:[(0,a.jsx)(h.A,{name:"name",placeholder:"Next Item Name",size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(h.A,{name:"link",placeholder:"Next Item Link",size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(u.A,{control:(0,a.jsx)(x.A,{name:"protected"}),label:"Protected"}),(0,a.jsx)(p.A,{type:"submit",variant:"outlined",color:"primary",disabled:y==="add-next-".concat(t),startIcon:y==="add-next-".concat(t)&&(0,a.jsx)(g.A,{size:20}),sx:{marginRight:"0.5rem"},children:y==="add-next-".concat(t)?"Adding...":"Add Next Item"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let n=new FormData(e.currentTarget);R("add-child",{parentIndex:t,name:n.get("name"),link:n.get("link"),index:0,protected:"on"===n.get("protected")},"add-child-".concat(t)),e.currentTarget.reset()},children:[(0,a.jsx)(h.A,{name:"name",placeholder:"Child Item Name",size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(h.A,{name:"link",placeholder:"Child Item Link",size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(u.A,{control:(0,a.jsx)(x.A,{name:"protected"}),label:"Protected"}),(0,a.jsx)(p.A,{type:"submit",variant:"outlined",color:"primary",disabled:y==="add-child-".concat(t),startIcon:y==="add-child-".concat(t)&&(0,a.jsx)(g.A,{size:20}),sx:{marginRight:"0.5rem"},children:y==="add-child-".concat(t)?"Adding...":" Add Child Item"})]}),(0,a.jsx)("form",{onSubmit:n=>{n.preventDefault(),R("delete",{parentIndex:t,name:e.name,link:e.link,protected:e.protected},"delete-".concat(t))},children:(0,a.jsx)(p.A,{type:"submit",variant:"outlined",color:"secondary",disabled:y==="delete-".concat(t),startIcon:y==="delete-".concat(t)&&(0,a.jsx)(g.A,{size:20}),sx:{marginRight:"0.5rem"},children:y==="delete-".concat(t)?"Deleting...":"Delete Item"})})]})]}),e.subMenu&&e.subMenu.map((e,n)=>(0,a.jsxs)(s.A,{children:[(0,a.jsx)(o.A,{sx:{paddingLeft:"2rem"},children:e.name}),(0,a.jsx)(o.A,{children:e.link}),(0,a.jsx)(o.A,{children:(0,a.jsx)(x.A,{checked:e.protected,disabled:!0})}),(0,a.jsxs)(o.A,{children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=new FormData(e.currentTarget);R("edit",{parentIndex:t,index:n,name:a.get("name"),link:a.get("link"),protected:"on"===a.get("protected")},"edit-".concat(t,"-").concat(n))},children:[(0,a.jsx)(h.A,{name:"name",defaultValue:e.name,size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(h.A,{name:"link",defaultValue:e.link,size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(u.A,{control:(0,a.jsx)(x.A,{name:"protected",checked:e.protected}),label:"Protected"}),(0,a.jsx)(p.A,{type:"submit",variant:"outlined",color:"primary",disabled:y==="edit-".concat(t,"-").concat(n),startIcon:y==="edit-".concat(t,"-").concat(n)&&(0,a.jsx)(g.A,{size:20}),sx:{marginRight:"0.5rem"},children:y==="edit-".concat(t,"-").concat(n)?"Updating...":"Update"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=new FormData(e.currentTarget);R("add",{parentIndex:t,index:n,name:a.get("name"),link:a.get("link"),protected:"on"===a.get("protected")},"add-next-".concat(t,"-").concat(n)),e.currentTarget.reset()},children:[(0,a.jsx)(h.A,{name:"name",placeholder:"Next Item Name",size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(h.A,{name:"link",placeholder:"Next Item Link",size:"small",sx:{marginRight:"0.5rem"}}),(0,a.jsx)(u.A,{control:(0,a.jsx)(x.A,{name:"protected"}),label:"Protected"}),(0,a.jsx)(p.A,{type:"submit",variant:"outlined",color:"primary",disabled:y==="add-next-".concat(t,"-").concat(n),startIcon:y==="add-next-".concat(t,"-").concat(n)&&(0,a.jsx)(g.A,{size:20}),sx:{marginRight:"0.5rem"},children:y==="add-next-".concat(t,"-").concat(n)?"Adding...":"Add Next Item"})]}),(0,a.jsx)("form",{onSubmit:a=>{a.preventDefault(),R("delete",{parentIndex:t,index:n,name:e.name,link:e.link,protected:e.protected},"delete-".concat(t,"-").concat(n))},children:(0,a.jsx)(p.A,{type:"submit",variant:"outlined",color:"secondary",disabled:y==="delete-".concat(t,"-").concat(n),startIcon:y==="delete-".concat(t,"-").concat(n)&&(0,a.jsx)(g.A,{size:20}),sx:{marginRight:"0.5rem"},children:y==="delete-".concat(t,"-").concat(n)?"Deleting...":"Delete Item"})})]})]},"".concat(t,"-").concat(n)))]},t))})]})]})}},53961:(e,t,n)=>{"use strict";n.d(t,{C:()=>a});let a=()=>!1},64940:(e,t,n)=>{Promise.resolve().then(n.bind(n,30519))}},e=>{e.O(0,[877,564,284,922,555,441,255,358],()=>e(e.s=64940)),_N_E=e.O()}]);