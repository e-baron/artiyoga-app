(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{15635:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>h});var n=o(95155),r=o(12115),c=o(41574),i=o(80317),a=o(27515),s=o(64647);let l=async e=>{let t=new TextEncoder().encode(e);return btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.digest("SHA-256",t)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},d="Ov23li8tNyy6uWkjb7yz",h=()=>{let[e,t]=(0,r.useState)(null),[o,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("code");if(e){let t=sessionStorage.getItem("pkce_code_verifier");t?g(e,t):h("Code verifier is missing. Please try connecting again.")}},[]);let g=async(e,o)=>{try{let n=await fetch("https://github.com/login/oauth/access_token",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({client_id:d,code:e,code_verifier:o})}),r=await n.json();r.access_token?(t(r.access_token),localStorage.setItem("github_token",r.access_token)):h("Failed to retrieve access token.")}catch(e){console.error("Error fetching access token:",e),h("An error occurred while connecting to GitHub."+e)}},u=async()=>{let e=window.location.origin+"/admin/connect",t=(()=>{let e=new Uint8Array(128);return window.crypto.getRandomValues(e),btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})(),o=await l(t);sessionStorage.setItem("pkce_code_verifier",t);let n="https://github.com/login/oauth/authorize?client_id=".concat(d,"&redirect_uri=").concat(e,"&scope=repo&code_challenge=").concat(o,"&code_challenge_method=S256");window.location.href=n};return(0,n.jsxs)(c.default,{sx:{padding:"2rem"},children:[(0,n.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:"Connect to GitHub"}),e?(0,n.jsx)(a.A,{severity:"success",sx:{marginBottom:"1rem"},children:"Connected to GitHub!"}):(0,n.jsx)(a.A,{severity:"warning",sx:{marginBottom:"1rem"},children:"Not connected to GitHub."}),o&&(0,n.jsx)(a.A,{severity:"error",sx:{marginBottom:"1rem"},children:o}),(0,n.jsx)(c.default,{children:e?(0,n.jsx)(s.A,{variant:"contained",color:"secondary",onClick:()=>{t(null),localStorage.removeItem("github_token")},children:"Disconnect"}):(0,n.jsx)(s.A,{variant:"contained",color:"primary",onClick:u,children:"Connect to GitHub"})})]})}},82175:(e,t,o)=>{Promise.resolve().then(o.bind(o,15635))}},e=>{e.O(0,[877,515,441,255,358],()=>e(e.s=82175)),_N_E=e.O()}]);