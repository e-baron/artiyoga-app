(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{19686:(e,l,n)=>{Promise.resolve().then(n.bind(n,44687))},44687:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>h});var t=n(95155),s=n(97282),i=n(10831),a=n(49782),r=n(59375),o=n(11864),u=n(12115),d=n(53961);let h=()=>{let[e,l]=(0,u.useState)(null),[n,h]=(0,u.useState)(null),[c,p]=(0,u.useState)([]),[m,b]=(0,u.useState)([]),[g,f]=(0,u.useState)([]),[x,j]=(0,u.useState)([]),[v,y]=(0,u.useState)(!1);(0,u.useEffect)(()=>{(async()=>{if((0,d.C)())try{let s=await fetch("/api/publish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"read config"})});if(s.ok){var e,l,n,t;let i=await s.json();console.log("Fetched unpublished items:",i),b(null!=(e=i.unpublishedMenuItems)?e:[]),p(null!=(l=i.unpublishedPages)?l:[]),f(null!=(n=i.unpublishedAssets)?n:[]),j(null!=(t=i.menuLinks)?t:[])}else{let e=await s.json();h(e.message)}}catch(e){console.error("Error fetching unpublished items:",e),h("Failed to fetch unpublished items.")}})()},[]);let P=async e=>{if(e.preventDefault(),!d.C)return void h("Publishing is only available in development mode.");y(!0);try{let e=await fetch("/api/publish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"publish all"})});if(e.ok)l("All unpublished items have been published."),h(null),b([]),p([]),f([]);else{let n=await e.json();h(n.message||"Failed to publish items."),l(null)}}catch(e){console.error("Error publishing items:",e),h("An error occurred while publishing items. "+(e instanceof Error?e.message:"Unknown error")),l(null)}finally{y(!1)}};return d.C?(0,t.jsxs)(s.default,{sx:{padding:"1rem"},children:[(0,t.jsx)("h3",{children:"Publish all items"}),(e||n)&&(0,t.jsx)(s.default,{sx:{marginBottom:"1rem",padding:"1rem",borderRadius:"4px",backgroundColor:e?"green":"red",color:"white"},children:(0,t.jsx)(i.A,{variant:"body1",children:e||n})}),(0,t.jsx)("h4",{children:"Unpublished Pages"}),0===c.length&&(0,t.jsx)("p",{children:"No unpublished pages."}),c.map((e,l)=>(0,t.jsx)(s.default,{sx:{marginBottom:"0.5rem"},children:(0,t.jsx)(a.A,{label:"Page: ".concat(e.name),value:e.operation,slotProps:{input:{readOnly:!0}},variant:"outlined",fullWidth:!0})},l)),(0,t.jsx)("h4",{children:"Unpublished Assets"}),0===g.length&&(0,t.jsx)("p",{children:"No unpublished assets."}),g.map((e,l)=>(0,t.jsx)(s.default,{sx:{marginBottom:"0.5rem"},children:(0,t.jsx)(a.A,{label:"Asset: ".concat(e.filepath),value:e.operation,slotProps:{input:{readOnly:!0}},variant:"outlined",fullWidth:!0})},l)),(0,t.jsx)("h4",{children:"Unpublished Menu Items"}),0===m.length&&(0,t.jsx)("p",{children:"No unpublished menu items."}),m.map((e,l)=>(0,t.jsx)(s.default,{sx:{marginBottom:"0.5rem"},children:(0,t.jsx)(a.A,{label:"Menu Item: ".concat(e.name," ").concat(e.link),value:e.operation,slotProps:{input:{readOnly:!0}},variant:"outlined",fullWidth:!0})},l)),(0,t.jsx)("br",{}),m.length>0||c.length>0||g.length>0?(0,t.jsx)("form",{onSubmit:P,children:(0,t.jsx)(r.A,{type:"submit",variant:"contained",color:"primary",disabled:v,startIcon:v&&(0,t.jsx)(o.A,{size:20}),children:v?"Publishing...":"Publish All"})}):null]}):null}},53961:(e,l,n)=>{"use strict";n.d(l,{C:()=>s});var t=n(95704);let s=()=>"production"!==t.env.NEXT_PUBLIC_NODE_ENV}},e=>{e.O(0,[352,971,782,441,255,358],()=>e(e.s=19686)),_N_E=e.O()}]);