(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{44687:(e,l,n)=>{"use strict";n.r(l),n.d(l,{default:()=>d});var t=n(95155),i=n(97282),s=n(10831),r=n(42670),a=n(43612),o=n(12115);let u="development"===n(95704).env.NEXT_PUBLIC_NODE_ENV,d=()=>{let[e,l]=(0,o.useState)(null),[n,d]=(0,o.useState)(null),[h,c]=(0,o.useState)([]),[p,m]=(0,o.useState)([]),[b,g]=(0,o.useState)([]);(0,o.useEffect)(()=>{(async()=>{if(u)try{let t=await fetch("/api/publish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"read config"})});if(t.ok){var e,l,n;let i=await t.json();console.log("Fetched unpublished items:",i),m(null!=(e=i.unpublishedMenuItems)?e:[]),c(null!=(l=i.unpublishedPages)?l:[]),g(null!=(n=i.menuLinks)?n:[])}else{let e=await t.json();d(e.message)}}catch(e){console.error("Error fetching unpublished items:",e),d("Failed to fetch unpublished items.")}})()},[]);let f=async e=>{if(e.preventDefault(),!u)return void d("Publishing is only available in development mode.");try{let e=await fetch("/api/publish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"publish all"})});if(e.ok)l("All unpublished items have been published."),d(null),m([]),c([]);else{let n=await e.json();d(n.message||"Failed to publish items."),l(null)}}catch(e){console.error("Error publishing items:",e),d("An error occurred while publishing items. "+(e instanceof Error?e.message:"Unknown error")),l(null)}};return u?(0,t.jsxs)(i.default,{sx:{padding:"1rem"},children:[(0,t.jsx)("h3",{children:"Publish all items"}),(e||n)&&(0,t.jsx)(i.default,{sx:{marginBottom:"1rem",padding:"1rem",borderRadius:"4px",backgroundColor:e?"green":"red",color:"white"},children:(0,t.jsx)(s.A,{variant:"body1",children:e||n})}),(0,t.jsx)("h4",{children:"Unpublished Pages"}),0===h.length&&(0,t.jsx)("p",{children:"No unpublished pages."}),h.map((e,l)=>(0,t.jsx)(i.default,{sx:{marginBottom:"0.5rem"},children:(0,t.jsx)(r.A,{label:"Page: ".concat(e.name),value:e.operation,slotProps:{input:{readOnly:!0}},variant:"outlined",fullWidth:!0})},l)),(0,t.jsx)("h4",{children:"Unpublished Menu Items"}),0===p.length&&(0,t.jsx)("p",{children:"No unpublished menu items."}),p.map((e,l)=>(0,t.jsx)(i.default,{sx:{marginBottom:"0.5rem"},children:(0,t.jsx)(r.A,{label:"Menu Item: ".concat(e.name," ").concat(e.link),value:e.operation,slotProps:{input:{readOnly:!0}},variant:"outlined",fullWidth:!0})},l)),(0,t.jsx)("br",{}),p.length>0||h.length>0?(0,t.jsx)("form",{onSubmit:f,children:(0,t.jsx)(a.A,{type:"submit",variant:"contained",color:"primary",children:"Publish All"})}):null]}):null}},60356:(e,l,n)=>{Promise.resolve().then(n.bind(n,44687))}},e=>{e.O(0,[193,199,670,441,255,358],()=>e(e.s=60356)),_N_E=e.O()}]);