(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{7466:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>P});var a=l(95155),n=l(12115),r=l(41574),s=l(80317),i=l(77284),o=l(64647),c=l(98638),d=l(27515),u=l(2821),h=l(37659),p=l(49714),f=l(57179),x=l(13053),A=l(81421);function g(e){return(0,A.Ay)("MuiTableContainer",e)}(0,x.A)("MuiTableContainer",["root"]);let m=(0,p.Ay)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),j=n.forwardRef(function(e,t){let l=(0,f.b)({props:e,name:"MuiTableContainer"}),{className:n,component:r="div",...s}=l,i={...l,component:r},o=(e=>{let{classes:t}=e;return(0,h.A)({root:["root"]},g,t)})(i);return(0,a.jsx)(m,{ref:t,as:r,className:(0,u.A)(o.root,n),ownerState:i,...s})});var y=l(75970),b=l(56120),v=l(80223),w=l(54463),S=l(31512),C=l(6388),N=l(24288);let T=(0,l(50645).A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),P=()=>{let[e,t]=(0,n.useState)(null),[l,u]=(0,n.useState)(""),[h,p]=(0,n.useState)([]),[f,x]=(0,n.useState)(null),[A,g]=(0,n.useState)(null),[m,P]=(0,n.useState)(null),E=async()=>{x("fetch"),P(null);try{let e=await fetch("/api/assets/manage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"read"})}),t=await e.json();t.fileNames?p(t.fileNames):P("Failed to fetch assets.")}catch(e){console.error("Error fetching assets:",e),P("An error occurred while fetching assets.")}finally{x(null)}},M=async t=>{if(t.preventDefault(),!e)return void P("Please select a file to upload.");if(!l)return void P("Please specify the file path.");x("upload"),P(null),g(null);try{let t=new FormData;t.append("file",e),t.append("action","create"),t.append("filepath",l);let a=await fetch("/api/assets/manage",{method:"POST",body:t}),n=await a.json();n.message?(g(n.message),E()):P(n.error||"Failed to upload the file.")}catch(e){console.error("Error uploading file:",e),P("An error occurred while uploading the file.")}finally{x(null)}},O=async e=>{x(e),P(null),g(null);try{let t=await fetch("/api/assets/manage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",filepath:e})}),l=await t.json();l.message?(g(l.message),E()):P(l.error||"Failed to delete the file.")}catch(e){console.error("Error deleting file:",e),P("An error occurred while deleting the file.")}finally{x(null)}};return(0,n.useEffect)(()=>{E()},[]),(0,a.jsxs)(r.default,{sx:{padding:"1rem"},children:[(0,a.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:"Manage Assets"}),(0,a.jsxs)(r.default,{component:"form",onSubmit:M,sx:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"2rem"},children:[(0,a.jsx)(s.A,{variant:"h6",children:"Upload a New Asset"}),(0,a.jsx)(i.A,{label:"File Path",value:l,onChange:e=>u(e.target.value),placeholder:"e.g., public/uploads/myfile.txt",fullWidth:!0}),(0,a.jsx)(i.A,{type:"file",onChange:e=>{var l;t((null==(l=e.target.files)?void 0:l[0])||null)},inputProps:{accept:"*"}}),(0,a.jsx)(o.A,{type:"submit",variant:"contained",color:"primary",disabled:"upload"===f,startIcon:"upload"===f&&(0,a.jsx)(c.A,{size:20}),sx:{alignSelf:"flex-start",width:"200px"},children:"upload"===f?"Uploading...":"Upload"})]}),A&&(0,a.jsx)(d.A,{severity:"success",children:A}),m&&(0,a.jsx)(d.A,{severity:"error",children:m}),(0,a.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Current Assets"}),"fetch"===f?(0,a.jsx)(c.A,{}):(0,a.jsx)(j,{component:y.A,children:(0,a.jsxs)(b.A,{children:[(0,a.jsx)(v.A,{children:(0,a.jsxs)(w.A,{children:[(0,a.jsx)(S.A,{children:"Asset Name"}),(0,a.jsx)(S.A,{align:"right",children:"Actions"})]})}),(0,a.jsx)(C.A,{children:h.map(e=>(0,a.jsxs)(w.A,{children:[(0,a.jsx)(S.A,{children:(0,a.jsx)("span",{style:{display:"inline-block",paddingLeft:"".concat(16*(e.split("/").length-1),"px")},children:e})}),(0,a.jsx)(S.A,{align:"right",children:(0,a.jsx)(N.A,{edge:"end","aria-label":"delete",onClick:()=>O("public/".concat(e)),disabled:f==="public/".concat(e),children:f==="public/".concat(e)?(0,a.jsx)(c.A,{size:20}):(0,a.jsx)(T,{})})})]},e))})]})})]})}},95710:(e,t,l)=>{Promise.resolve().then(l.bind(l,7466))}},e=>{e.O(0,[877,564,284,515,922,441,255,358],()=>e(e.s=95710)),_N_E=e.O()}]);