(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{41463:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>P});var a=l(95155),r=l(12115),n=l(97282),s=l(10831),i=l(49782),o=l(59375),c=l(4760),d=l(11864),h=l(85859),u=l(57001),p=l(52040),f=l(14877),x=l(85795),A=l(95195);function g(e){return(0,A.Ay)("MuiTableContainer",e)}(0,x.A)("MuiTableContainer",["root"]);let j=(0,p.Ay)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),m=r.forwardRef(function(e,t){let l=(0,f.b)({props:e,name:"MuiTableContainer"}),{className:r,component:n="div",...s}=l,i={...l,component:n},o=(e=>{let{classes:t}=e;return(0,u.A)({root:["root"]},g,t)})(i);return(0,a.jsx)(j,{ref:t,as:n,className:(0,h.A)(o.root,r),ownerState:i,...s})});var y=l(91231),v=l(87556),b=l(12499),w=l(82662),S=l(71696),C=l(48154),N=l(21856);let T=(0,l(6793).A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),P=()=>{let[e,t]=(0,r.useState)(null),[l,h]=(0,r.useState)(""),[u,p]=(0,r.useState)([]),[f,x]=(0,r.useState)(!1),[A,g]=(0,r.useState)(null),[j,P]=(0,r.useState)(null),E=async()=>{x(!0),P(null);try{let e=await fetch("/api/assets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"read"})}),t=await e.json();t.fileNames?p(t.fileNames):P("Failed to fetch assets.")}catch(e){console.error("Error fetching assets:",e),P("An error occurred while fetching assets.")}finally{x(!1)}},M=async t=>{if(t.preventDefault(),!e)return void P("Please select a file to upload.");if(!l)return void P("Please specify the file path.");x(!0),P(null),g(null);try{let t=new FormData;t.append("file",e),t.append("action","create"),t.append("filepath",l);let a=await fetch("/api/assets",{method:"POST",body:t}),r=await a.json();r.message?(g(r.message),E()):P(r.error||"Failed to upload the file.")}catch(e){console.error("Error uploading file:",e),P("An error occurred while uploading the file.")}finally{x(!1)}},O=async e=>{x(!0),P(null),g(null);try{let t=await fetch("/api/assets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",filepath:e})}),l=await t.json();l.message?(g(l.message),E()):P(l.error||"Failed to delete the file.")}catch(e){console.error("Error deleting file:",e),P("An error occurred while deleting the file.")}finally{x(!1)}};return(0,r.useEffect)(()=>{E()},[]),(0,a.jsxs)(n.default,{sx:{padding:"1rem"},children:[(0,a.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:"Manage Assets"}),(0,a.jsxs)(n.default,{component:"form",onSubmit:M,sx:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"2rem"},children:[(0,a.jsx)(s.A,{variant:"h6",children:"Upload a New Asset"}),(0,a.jsx)(i.A,{label:"File Path",value:l,onChange:e=>h(e.target.value),placeholder:"e.g., public/uploads/myfile.txt",fullWidth:!0}),(0,a.jsx)(i.A,{type:"file",onChange:e=>{var l;t((null==(l=e.target.files)?void 0:l[0])||null)},inputProps:{accept:"*"}}),(0,a.jsx)(o.A,{type:"submit",variant:"contained",color:"primary",disabled:f,sx:{alignSelf:"flex-start",width:"200px"},children:"Upload"})]}),A&&(0,a.jsx)(c.A,{severity:"success",children:A}),j&&(0,a.jsx)(c.A,{severity:"error",children:j}),(0,a.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"Current Assets"}),f?(0,a.jsx)(d.A,{}):(0,a.jsx)(m,{component:y.A,children:(0,a.jsxs)(v.A,{children:[(0,a.jsx)(b.A,{children:(0,a.jsxs)(w.A,{children:[(0,a.jsx)(S.A,{children:"Asset Name"}),(0,a.jsx)(S.A,{align:"right",children:"Actions"})]})}),(0,a.jsx)(C.A,{children:u.map(e=>(0,a.jsxs)(w.A,{children:[(0,a.jsx)(S.A,{children:(0,a.jsx)("span",{style:{display:"inline-block",paddingLeft:"".concat(16*(e.split("/").length-1),"px")},children:e})}),(0,a.jsx)(S.A,{align:"right",children:(0,a.jsx)(N.A,{edge:"end","aria-label":"delete",onClick:()=>O("public/".concat(e)),children:(0,a.jsx)(T,{})})})]},e))})]})})]})}},49059:(e,t,l)=>{Promise.resolve().then(l.bind(l,41463))}},e=>{e.O(0,[352,971,782,760,47,441,255,358],()=>e(e.s=49059)),_N_E=e.O()}]);